// Generated by CoffeeScript 1.6.1
(function(){var e,t=this;e=function(){function e(t){var n=this;this.data=t;this.scrollChat=function(){return e.prototype.scrollChat.apply(n,arguments)};this.setStory=function(t){return e.prototype.setStory.apply(n,arguments)};this.onPost=function(t){return e.prototype.onPost.apply(n,arguments)};this.onReception=function(t){return e.prototype.onReception.apply(n,arguments)};this.onAlert=function(t){return e.prototype.onAlert.apply(n,arguments)};this.me="Nicolas";this.messages=[];this.users=[];this.chat=$("#chat");$("#input input").on("keypress",function(e){var t;if(e.charCode===13){t=$("#input input").val();n.onPost({user:n.me,content:t});return $("#input input").val("")}});$("#send").on("click",function(e){var t;t=$("#input input").val();n.onPost({user:n.me,content:t});return $("#input input").val("")});return this}e.prototype.onAlert=function(e){var t;t=new Alert(e);console.log(t);return this.chat.append(t.html)};e.prototype.onReception=function(e){var t;t=new Message(e);this.messages.push(t);this.chat.append(t.html);this.setStory(t);this.scrollChat()};e.prototype.onPost=function(e){now.postMessage(e);return this};e.prototype.setStory=function(e){var t,n;n=!1;t=this.messages[this.messages.length-2];if(t!=null)if(t.user===e.user){t.getClass()===""?t.setClass("start"):t.setClass("continue");e.setClass("end")}else t.getClass==="continue"&&t.setClass("end");return n};e.prototype.scrollChat=function(){var e;e=document.getElementById("chat");e.scrollTop=e.scrollHeight};return e}();window.ChatController=e}).call(this);